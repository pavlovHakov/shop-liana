# Тестирование функциональности "Избранное"

## Шаги для тестирования:

### 1. Проверка базы данных

Откройте в браузере: `http://localhost/test_favorites.php`

- Убедитесь, что все проверки показывают зеленые галочки
- Если таблица `favorites` не найдена, выполните SQL-скрипт `create_favorites_table.sql`

### 2. Тестирование добавления в избранное

1. Откройте главную страницу: `http://localhost/index.php`
2. Откройте консоль браузера (F12 → Console)
3. Найдите любой товар и кликните по иконке сердца
4. В консоли должны появиться сообщения:
   - "Найдено иконок избранного: X"
   - "Инициализация иконки X, productId: Y"
   - "Клик по иконке избранного, productId: Y"
   - "Текущее состояние: не в избранном"
   - "Действие: add"
   - "Ответ от сервера: 200"
   - "Данные от сервера: {success: true, message: '...'}"
   - "Товар добавлен в избранное"

### 3. Проверка изменения цвета иконки

- Иконка должна изменить цвет с голубого на красный
- Должно появиться уведомление "Товар добавлен в избранное"

### 4. Проверка страницы избранного

1. Перейдите на: `http://localhost/favorite.php`
2. Убедитесь, что добавленный товар отображается в списке
3. Проверьте, что можно удалить товар кнопкой "Удалить из избранного"

### 5. Тестирование удаления из избранного

1. Вернитесь на главную страницу
2. Кликните по красной иконке сердца
3. Иконка должна вернуться к голубому цвету
4. Перейдите на страницу избранного - товар должен исчезнуть

### 6. Проверка состояния при перезагрузке

1. Добавьте товар в избранное
2. Перезагрузите страницу (F5)
3. Иконка должна остаться красной
4. Перейдите на страницу избранного - товар должен быть там

## Возможные проблемы и решения:

### Проблема: Иконки не реагируют на клики

**Решение:**

- Проверьте, что JavaScript подключен: `<script src="js/icon-favorite.js"></script>`
- Убедитесь, что у иконок есть атрибут `data-product-id`
- Проверьте консоль браузера на ошибки

### Проблема: API возвращает ошибку

**Решение:**

- Проверьте, что таблица `favorites` создана в базе данных
- Убедитесь, что файл `api/favorites.php` доступен
- Проверьте права доступа к файлам

### Проблема: Товары не отображаются в избранном

**Решение:**

- Проверьте, что функция `getFavorites()` работает корректно
- Убедитесь, что session ID сохраняется между запросами
- Проверьте, что товары существуют в таблице `product`

### Проблема: Цвет иконки не меняется

**Решение:**

- Проверьте CSS стили для иконки
- Убедитесь, что JavaScript правильно обновляет `style.fill`
- Проверьте, что нет конфликтующих стилей

## Отладочная информация:

Все действия логируются в консоль браузера. Если что-то не работает, проверьте:

1. Консоль браузера на ошибки JavaScript
2. Вкладку Network в DevTools для проверки AJAX запросов
3. Логи сервера для ошибок PHP

## Тестовые данные:

Если нужно добавить тестовые товары в базу данных:

```sql
INSERT INTO product (name, price, img, size, availability) VALUES
('Тестовый товар 1', 100.00, 'test1.jpg', 'S,M,L', 'Есть'),
('Тестовый товар 2', 200.00, 'test2.jpg', 'M,L,XL', 'Есть'),
('Тестовый товар 3', 150.00, 'test3.jpg', 'S,L', 'Нет');
```
